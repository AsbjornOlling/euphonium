var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,t,n)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,o=(e,a)=>{for(var t in a||(a={}))i.call(a,t)&&r(e,t,a[t]);if(n)for(var t of n(a))s.call(a,t)&&r(e,t,a[t]);return e},l=(e,n)=>a(e,t(n));"undefined"!=typeof require&&require;import{l as c,y as _,v as p,L as d,d as u,R as m,a as v,S as f}from"./vendor.b5fd5a91.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();var h="_mainWrapper_1rpps_1",y="_mainWrapper__mainContent_1rpps_9";let b=new EventSource("/events");var g,w,N,C;(w=g||(g={})).Plugin="plugin",w.System="system",w.App="app",(C=N||(N={})).String="string",C.StringList="stringList";var S="_sideBar_1qeew_1",j="_sideBar__header_1qeew_10",O="_sideBar__subheader_1qeew_14",L="_sideBar__itemwrapper_1qeew_20",k="_sideBar__itemselected_1qeew_26",q="_sideBar__item_1qeew_20";const P=({displayName:e="",name:a="",type:t=""})=>p(d,{activeClassName:k,className:L,href:"app"==t?`/web/apps/${a}`:`/web/plugin/${a}`},p("div",{className:q},e));var B=()=>{const[e,a]=c([]);return _((()=>{(async()=>await fetch("/plugins").then((e=>e.json())).then((e=>e.map((e=>e)))))().then((e=>{a(e)}))}),[]),p("div",{className:S},p("div",{className:j},"Euphonium ðŸŽº"),p("div",{className:O},"available apps"),e.filter((e=>e.type==g.App)).map((e=>p(P,o({},e)))),p("div",{className:O},"system modules"),e.filter((e=>e.type==g.System)).map((e=>p(P,o({},e)))),p("div",{className:O},"installed plugins"),e.filter((e=>e.type==g.Plugin)).map((e=>p(P,o({},e)))))},W=e=>{var a=e,{name:t=""}=a,r=((e,a)=>{var t={};for(var r in e)i.call(e,r)&&a.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&n)for(var r of n(e))a.indexOf(r)<0&&s.call(e,r)&&(t[r]=e[r]);return t})(a,["name"]);return p("i",l(o({},r),{className:"icon-"+t}))};var E="_inputContainer_10c59_1",$="_inputContainer__icon_10c59_5",T="_inputContainer__input_10c59_13",A="_inputContainer__input_icon_10c59_24",I="_inputContainer__tooltip_10c59_27",x=({tooltip:e,value:a,onChange:t,icon:n,placeholder:i})=>p("div",{class:E},e&&p("div",{class:I},e),p("input",{placeholder:i,className:`${T} ${n&&A}`,value:a,onChange:e=>t(e.target.value)}),n&&p("div",{class:$},p(W,{name:"search"})));var H={select:"_select_8pw5i_1",select__tooltip:"_select__tooltip_8pw5i_13"},J=({tooltip:e="",values:a=[],value:t,onChange:n})=>p("div",null,p("div",{class:H.select__tooltip},e),p("div",{class:H.select__wrapper},p("select",{class:H.select,value:t,onChange:e=>n(e.target.value)},a.map(((e,a)=>p("option",{value:e},e))))));var U="_confWrapper_19rlc_1",D="_confWrapper__header_19rlc_7",K="_confWrapper__subheader_19rlc_10",M="_confWrapper__card_19rlc_15",R=({title:e="",subtitle:a="",children:t={}})=>p("div",{className:U},p("div",{className:D},e),p("div",{className:K},a),p("div",{className:M},t));var V=({plugin:e=""})=>{const[a,t]=c(""),[n,i]=c([]);_((()=>{(async e=>await fetch(`/plugins/${e}`).then((e=>e.json())).then((e=>({displayName:e.displayName,fields:Object.keys(e.configSchema).map((a=>l(o({},e.configSchema[a]),{key:a})))}))))(e).then((e=>{i(e.fields),t(e.displayName)}))}),[e]);const s=(e,a)=>{const t=n.map((t=>t===e?l(o({},t),{value:a}):t));i(t)};return p(R,{title:a,subtitle:"plugin configuration"},n.map((e=>((e,a)=>{let{type:t,tooltip:n,value:i,listValues:s}=e;const r=t=>a(e,t);switch(t){case N.String:return p(x,{tooltip:n,value:i,onChange:r});case N.StringList:return p(J,{tooltip:n,value:i,values:s,onChange:r});default:return p("p",null,"Unsupported field type")}})(e,s))))};var z="_playbackContainer_4872f_1",F="_progressBar_4872f_6",G="_wrapper_4872f_20",Q="_wrapper__cover_4872f_27",X="_wrapper__playbackContainer_4872f_33",Y="_wrapper__songContainer_4872f_41",Z="_wrapper__controlsContainer_4872f_44",ee="_wrapper__songName_4872f_60",ae="_wrapper__songSubtitle_4872f_64";const te=()=>{const[e,a]=c();return _((()=>{(async()=>await fetch("/playback").then((e=>e.json())).then((e=>e)))().then((e=>a(e)))}),[]),_((()=>{b.addEventListener("playback",(({data:e})=>{console.log(e),a(JSON.parse(e))}))}),[]),p("div",{className:G},p("img",{className:Q,src:null==e?void 0:e.icon}),p("div",{className:X},p("div",{className:Y},p("div",{className:ee},null==e?void 0:e.songName),p("div",{className:ae},null==e?void 0:e.artistName," â€¢ ",null==e?void 0:e.albumName," â€¢ playback from ",null==e?void 0:e.sourceName)),p("div",{className:Z},p(W,{name:"pause"}))))},ne=()=>p("div",{className:F});var ie=()=>p("div",{className:z},p(te,null),p(ne,null)),se=()=>p(u,null);var re={stationList:"_stationList_1worb_1",savedTitle:"_savedTitle_1worb_9",stationContainer:"_stationContainer_1worb_14",stationContainer__name:"_stationContainer__name_1worb_29",stationContainer__controls:"_stationContainer__controls_1worb_39",stationContainer__stationHeader:"_stationContainer__stationHeader_1worb_44",stationContainer__cover:"_stationContainer__cover_1worb_48"};const oe=({name:e="",codec:a="",favicon:t="",bitrate:n=0,countrycode:i="",url_resolved:s=""})=>p("div",{className:re.stationContainer},p("img",{className:re.stationContainer__cover,src:t||"https://www.veryicon.com/download/png/media/music-series/sound-wave-1-2?s=256"}),p("div",{className:re.stationContainer__name},e),p("div",{className:re.stationContainer__subheader},a," Codec â€¢ ",n," kbps â€¢ ",i),p("div",{className:re.stationContainer__controls},p(W,{onClick:()=>(async(e,a,t,n)=>await fetch("/webradio",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({stationUrl:t,codec:n,stationName:e,favicon:a})}).then((e=>e.json())))(e,t,s,a),name:"play"}),p(W,{name:"save"})));var le=()=>{const[e,a]=c([]);return p(R,{title:"Web radio",subtitle:"application"},p(x,{onChange:e=>{(async e=>fetch(`https://nl1.api.radio-browser.info/json/stations/byname/${e}`).then((e=>e.json())).catch((e=>console.error(e))))(e).then(a)},value:"",placeholder:"Search radio-browser.info",icon:"search"}),p("div",{className:re.savedTitle},"Saved stations"),p("div",{className:re.stationList},e.map((e=>p(oe,o({},e))))))};function ce(){return p(u,null,p(se,null),p("div",{className:h},p(B,null),p("div",{className:y},p(m,null,p(v,{path:"/web/plugin/:plugin",component:V}),p(v,{path:"/web/apps/webradio",component:le})),p(ie,null))))}f(p(ce,null),document.getElementById("app"));
